<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<!-- Chart.js & Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    body { background-color: #f0f2f5; font-family: "Helvetica Neue", Arial, sans-serif; }
    .header-area { background: #1a237e; color: white; padding: 20px 0; margin-bottom: 25px; border-bottom: 4px solid #f1c40f; }
    .simulator-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px; transition: transform 0.2s; }
    .result-box { background: #e8f5e9; color: #2e7d32; padding: 20px; border-radius: 8px; margin-top: 15px; border-left: 5px solid #2ecc71; }
    .param-label { font-weight: bold; color: #444; font-size: 0.95rem; }
    .party-tag { font-size: 0.8em; padding: 3px 8px; border-radius: 4px; color: white; margin-right: 5px; display: inline-block; }
    
    /* æ”¿å…šã‚«ãƒ©ãƒ¼ */
    .bg-jimin { background-color: #d32f2f; }
    .bg-rikken { background-color: #1976d2; }
    .bg-kokumin { background-color: #fbc02d; color: black; }
    .bg-mirai { background-color: #8e44ad; }
    .bg-sanseito { background-color: #ff8c00; }
    .bg-reiwa { background-color: #ff0055; }
    .bg-kyosan { background-color: #cc0000; }
</style>
</head>
<body>

<div class="header-area">
    <div class="container d-flex justify-content-between align-items-center">
        <div>
            <h4 class="m-0 fw-bold">ğŸ—³ï¸ 2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h4>
            <small class="opacity-75">ç‰©ç†æ³•å‰‡ã§æœªæ¥ã‚’äºˆæ¸¬ã™ã‚‹</small>
        </div>
        <button class="btn btn-sm btn-about" style="border: 1px solid white; color: white;" data-bs-toggle="modal" data-bs-target="#aboutModal">
            â“˜ è§£èª¬
        </button>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- Input Panel -->
        <div class="col-lg-5 mb-3">
            <div class="simulator-card">
                <h6 class="mb-4 border-bottom pb-2 fw-bold">ğŸ›ï¸ ã‚ãªãŸãŒæœ›ã‚€æ—¥æœ¬ã®è¨­è¨ˆå›³</h6>
                
                <div class="mb-4">
                    <label class="param-label">æ¶ˆè²»ç¨ç‡ï¼ˆç”Ÿæ´»å¿…éœ€å“ã‚’å«ã‚€ï¼‰</label>
                    <input type="range" class="form-range" id="tax_rate" min="0" max="15" value="10" step="1" oninput="updateVal('val_tax', this.value, '%')">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>å»ƒæ­¢ (0%)</span>
                        <span id="val_tax" class="fw-bold text-primary fs-5">10%</span>
                        <span>å¢—ç¨ (15%)</span>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">æŠ•è³‡ã®è¦æ¨¡ã¨è²¡æºæˆ¦ç•¥</label>
                    <input type="range" class="form-range" id="fiscal_spend" min="0" max="3" value="1" step="1" oninput="updateFiscalLabel(this.value)">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>ç·Šç¸®ãƒ»ç¶­æŒ</span>
                        <span id="val_fiscal" class="fw-bold text-primary">ç¾çŠ¶ç¶­æŒ</span>
                        <span>è¶…ç©æ¥µãƒ»ç™ºè¡Œ</span>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">ç¤¾ä¼šä¿éšœãƒ»åˆ†é…ã®ä»•çµ„ã¿</label>
                    <select class="form-select form-select-sm" id="social_wall">
                        <option value="keep">ç¾çŠ¶ç¶­æŒ (æ—¢å­˜ã®ç¤¾ä¼šä¿éšœ)</option>
                        <option value="reform_centrist">é£Ÿæ–™å“ç¨ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸› (ä¸­é“æ”¹é©)</option>
                        <option value="reform_high">178ä¸‡å††ã®å£æ’¤å»ƒ (å›½æ°‘æ°‘ä¸»)</option>
                        <option value="reform_sanseito">è‡ªçµ¦è‡ªè¶³ãƒ»å­è‚²ã¦æœˆ10ä¸‡ (å‚æ”¿)</option>
                        <option value="reform_reiwa">æ¶ˆè²»ç¨å»ƒæ­¢ãƒ»å†å…¬å–¶åŒ– (ã‚Œã„ã‚)</option>
                        <option value="reform_kyosan">å†…éƒ¨ç•™ä¿é‚„æµãƒ»è»ç¸® (å…±ç”£)</option>
                        <option value="system_opt">ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ– (ãƒãƒ¼ãƒ ã¿ã‚‰ã„)</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label class="param-label">é˜²è¡›ãƒ»å¤–äº¤ã‚¹ã‚¿ãƒ³ã‚¹</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="defense" id="def_peace" value="peace">
                        <label class="btn btn-outline-secondary btn-sm" for="def_peace">å¯¾è©±ãƒ»è»ç¸®</label>
                        <input type="radio" class="btn-check" name="defense" id="def_status" value="status" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="def_status">å°‚å®ˆé˜²è¡›</label>
                        <input type="radio" class="btn-check" name="defense" id="def_strong" value="strong">
                        <label class="btn btn-outline-secondary btn-sm" for="def_strong">ç‹¬ç«‹è‡ªå°Šãƒ»å¼·åŒ–</label>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¿ç­–</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="energy" id="ene_renew" value="renew">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_renew">å†ã‚¨ãƒ100%</label>
                        <input type="radio" class="btn-check" name="energy" id="ene_mix" value="mix" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="ene_mix">åŸç™ºãƒ»å®‰å®š</label>
                        <input type="radio" class="btn-check" name="energy" id="ene_tech" value="tech">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_tech">æ¬¡ä¸–ä»£æŠ€è¡“æŠ•è³‡</label>
                    </div>
                </div>

                <button onclick="runSimulation()" class="btn btn-primary w-100 fw-bold shadow-sm py-2">
                    ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ ğŸš€
                </button>
            </div>
        </div>

        <!-- Result Panel -->
        <div class="col-lg-7">
            <div class="simulator-card">
                <h6 class="mb-3 border-bottom pb-2 fw-bold">ğŸ“Š 5å¹´å¾Œã®æ—¥æœ¬çµŒæ¸ˆäºˆæ¸¬ (SBCMåˆ†æ)</h6>
                <div id="chart-container" style="position: relative; height:300px;">
                    <canvas id="resultChart"></canvas>
                </div>
                <div id="result-text" class="result-box">
                    <strong>â˜ï¸ æ”¿ç­–ã‚’é¸æŠã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- About Modal -->
<div class="modal fade" id="aboutModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">å„å‹¢åŠ›ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«è§£èª¬</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body small">
                <div class="mb-3"><strong>ğŸ”´ ä¸å…š (è‡ªæ°‘ãƒ»ç¶­æ–°): æˆé•·æŠ•è³‡ãƒ¢ãƒ‡ãƒ«</strong><br>æ—¢å­˜ã‚¤ãƒ³ãƒ•ãƒ©ã¨é˜²è¡›åŠ›ã‚’å¼·åŒ–ã€‚å¤§å‹äºˆç®—ã§å›ã—ã¾ã™ãŒã€ä¸­å¤®é›†æ¨©çš„ãªã€Œæ¼å‡ºã€ãŒèª²é¡Œã€‚</div>
                <div class="mb-3"><strong>ğŸ”µ ä¸­é“æ”¹é©é€£åˆ: ä½æ‘©æ“¦ãƒ¢ãƒ‡ãƒ«</strong><br>é£Ÿæ–™å“ç¨ã‚¼ãƒ­ã§ç”Ÿæ´»è€…ã®æ‘©æ“¦ã‚’ç›´æ¥é™¤å»ã€‚ãƒ•ã‚¡ãƒ³ãƒ‰ã§è²¡æºã‚’èª¿é”ã™ã‚‹åºƒåŸŸå¾ªç’°å‹ã€‚</div>
                <div class="mb-3"><strong>ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š: é«˜åœ§çµŒæ¸ˆãƒ¢ãƒ‡ãƒ«</strong><br>178ä¸‡å††ã®å£æ’¤å»ƒã§ç¾å½¹ä¸–ä»£ã®é›»åœ§ã‚’ä¸€æ°—ã«ä¸Šã’ã€æ¶ˆè²»ã‚’çˆ†ç™ºã•ã›ã¾ã™ã€‚</div>
                <div class="mb-3"><strong>ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„: è¶…ä¼å°ãƒ¢ãƒ‡ãƒ«</strong><br>ãƒ‡ã‚¸ã‚¿ãƒ«ã«ã‚ˆã‚Šã€Œæ­ªã¿ã€ã‚’ã‚¼ãƒ­åŒ–ã€‚åŠ¹ç‡æ”¹å–„ã®ã¿ã§å‡ºåŠ›ã‚’ä¸Šã’ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°å‹ã€‚</div>
                <div class="mb-3"><strong>ğŸŸ  å‚æ”¿å…š: ç‹¬ç«‹è‡ªå°Šãƒ¢ãƒ‡ãƒ«</strong><br>å·¨å¤§çµ¦ä»˜ã¨è² æ‹…ç‡35%ã‚’åŒæ™‚ã«ç‹™ã†é«˜ç†±æºè¨­è¨ˆã€‚ã‚·ã‚¹ãƒ†ãƒ ã®ç†±æš´èµ°ãƒªã‚¹ã‚¯å¤§ã€‚</div>
                <div class="mb-3"><strong>ğŸŒ¸ ã‚Œã„ã‚æ–°é¸çµ„: è¶…é«˜åœ§ãƒ»å…¬å…±æ–­ç†±ãƒ¢ãƒ‡ãƒ«</strong><br>é€šè²¨ç™ºè¡Œæ¨©ã‚’ãƒ–ãƒ¼ã‚¹ã‚¿ãƒ¼ã«ã—ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å†å…¬å–¶åŒ–ã€‚åœ°åŸŸä¿æŒç‡ï¼ˆRblockï¼‰ã‚’ç‰©ç†çš„ã«å›ºå®šã—ã¦æµå‡ºã‚’é˜²ãã¾ã™ã€‚</div>
                <div class="mb-3"><strong>ğŸš© æ—¥æœ¬å…±ç”£å…š: æµæŸæ˜¯æ­£ãƒ¢ãƒ‡ãƒ«</strong><br>å†…éƒ¨ç•™ä¿èª²ç¨ã«ã‚ˆã‚Šã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¯Œè£•å±¤ã‹ã‚‰ç”Ÿæ´»è€…ã¸å¼·åˆ¶é‚„æµã€‚è»ç¸®ã«ã‚ˆã‚Šè¡Œæ”¿ã®æ­ªã¿ã‚’æ˜¯æ­£ã€‚</div>
            </div>
        </div>
    </div>
</div>

<script>
    let myChart = null;

    function updateVal(id, val, suffix) { document.getElementById(id).innerText = val + suffix; }

    function updateFiscalLabel(val) {
        const labels = ["ç·Šç¸®ãƒ»ç¶­æŒ", "ãƒãƒ©ãƒ³ã‚¹æŠ•è³‡", "ç©æ¥µæŠ•è³‡", "è¶…ç©æ¥µãƒ»ç™ºè¡Œ"];
        document.getElementById("val_fiscal").innerText = labels[val];
    }

    function runSimulation() {
        const taxRate = parseFloat(document.getElementById("tax_rate").value);
        const fiscalLvl = parseInt(document.getElementById("fiscal_spend").value);
        const socialWall = document.getElementById("social_wall").value;
        const defense = document.querySelector('input[name="defense"]:checked').value;
        const energy = document.querySelector('input[name="energy"]:checked').value;

        const baseIncome = 460; const baseInflation = 1.5; 
        let incomeScore = 0; let inflationScore = 0; let distortionScore = 1.0; let futureBurden = 0; 

        // ãƒ­ã‚¸ãƒƒã‚¯æ¼”ç®—
        incomeScore += (10 - taxRate) * 2.0;
        if (taxRate < 5) { futureBurden += (5 - taxRate) * 15; inflationScore += (5 - taxRate) * 0.4; }

        if (fiscalLvl === 3) { incomeScore += 35; inflationScore += 3.0; distortionScore += 0.4; futureBurden += 50; }
        else if (fiscalLvl === 2) { incomeScore += 15; futureBurden += 10; }

        if (socialWall === 'reform_reiwa') { incomeScore += 40; distortionScore -= 0.05; futureBurden += 40; inflationScore += 0.8; }
        else if (socialWall === 'reform_kyosan') { incomeScore += 30; distortionScore -= 0.15; futureBurden += 15; }
        else if (socialWall === 'reform_centrist') { incomeScore += 18; distortionScore -= 0.1; }
        else if (socialWall === 'reform_high') { incomeScore += 25; futureBurden += 20; }
        else if (socialWall === 'system_opt') { incomeScore += 15; distortionScore -= 0.3; }

        if (defense === 'strong') futureBurden += 15;
        if (defense === 'peace') distortionScore -= 0.1; // è»ç¸®ã«ã‚ˆã‚‹æ­ªã¿æ¸›å°‘

        const finalIncome = baseIncome + (incomeScore / distortionScore) - (inflationScore * 8);
        const finalInflation = baseInflation + inflationScore;
        const finalDistortion = distortionScore;

        // ãƒãƒƒãƒãƒ³ã‚°
        let match = { name: "è©²å½“ãªã—", color: "#7f8c8d", desc: "ç‹¬è‡ªã®æ”¿ç­–ã§ã™ã€‚" };
        if (socialWall === 'reform_reiwa' || (taxRate === 0 && fiscalLvl === 3)) {
            match = { name: "ğŸŒ¸ ã‚Œã„ã‚æ–°é¸çµ„", color: "#ff0055", desc: "é€šè²¨ç™ºè¡Œã‚’åŸè³‡ã«ç¤¾ä¼šã‚’å†å…¬å–¶åŒ–ã€‚æ‰‹å–ã‚Šå¢—ã¯æœ€å¤§ç´šã§ã™ãŒã€ã‚¤ãƒ³ãƒ•ãƒ¬åˆ¶å¾¡ãŒéµã¨ãªã‚Šã¾ã™ã€‚" };
        } else if (socialWall === 'reform_kyosan' || (defense === 'peace' && fiscalLvl >= 2)) {
            match = { name: "ğŸš© æ—¥æœ¬å…±ç”£å…š", color: "#cc0000", desc: "å†…éƒ¨ç•™ä¿ã®é‚„æµã¨è»ç¸®ã‚’æ–­è¡Œã€‚æ­ªã¿ã‚’æ­£ã—ã¦ç”Ÿæ´»è€…ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æˆ»ã™é‚„æµãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚" };
        } else if (socialWall === 'reform_centrist') {
            match = { name: "ğŸ”µ ä¸­é“æ”¹é©é€£åˆ", color: "#1976d2", desc: "é£Ÿæ–™å“ç¨ã‚¼ãƒ­ã¨ç¤¾ä¿æ¸›ã§æŠµæŠ—ã‚’é™¤å»ã€‚ç¾å®Ÿçš„ã‹ã¤åºƒç¯„ãªæ”¯æ´ã‚’ç›®æŒ‡ã™å¾ªç’°å‹ã€‚" };
        } else if (socialWall === 'reform_high') {
            match = { name: "ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š", color: "#fbc02d", desc: "æ‰‹å–ã‚Šæœ€å¤§åŒ–ã€‚åŸºç¤æ§é™¤å¼•ãä¸Šã’ã§ç¾å½¹ã®é›»åœ§ã‚’ä¸€æ°—ã«é«˜ã‚ã‚‹ãƒ–ãƒ¼ã‚¹ã‚¿ãƒ¼å‹ã€‚" };
        } else if (socialWall === 'system_opt') {
            match = { name: "ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„", color: "#8e44ad", desc: "æ­ªã¿ã‚’ã‚¼ãƒ­ã«ã™ã‚‹è¶…ä¼å°çµ±æ²»ã€‚è¿½åŠ ã‚³ã‚¹ãƒˆãªã—ã§å‡ºåŠ›ã‚’ä¸Šã’ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°å‹ã€‚" };
        } else if (defense === 'strong' && fiscalLvl >= 1) {
            match = { name: "ğŸ”´ è‡ªæ°‘ãƒ»ç¶­æ–°", color: "#d32f2f", desc: "æˆé•·ã¨é˜²è¡›ã®æŠ•è³‡è·¯ç·šã€‚å®‰å®šæ„Ÿã¯ã‚ã‚Šã¾ã™ãŒä¸­æŠœãã«ã‚ˆã‚‹ç†±æå¤±ãŒèª²é¡Œã€‚" };
        }

        // æç”»
        const ctx = document.getElementById('resultChart').getContext('2d');
        if (myChart) myChart.destroy();
        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['å®Ÿè³ªæ‰‹å–ã‚Š', 'ã‚¤ãƒ³ãƒ•ãƒ¬ç‡', 'è¡Œæ”¿ã®æ­ªã¿'],
                datasets: [{
                    data: [Math.round(finalIncome)/baseIncome*100, (finalInflation/baseInflation)*100, finalDistortion*100],
                    backgroundColor: [finalIncome >= baseIncome ? '#2ecc71' : '#e74c3c', finalInflation > 4.0 ? '#e74c3c' : '#3498db', finalDistortion > 1.2 ? '#e74c3c' : '#3498db']
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 20, max: 200, ticks: { display: false } } }, plugins: { legend: { display: false } } }
        });

        document.getElementById("result-text").innerHTML = `<h5 style="color:${match.color}">${match.name}</h5><p class="small">${match.desc}</p><hr><div class="row text-center"><div class="col-4">æ‰‹å–ã‚Š<br><span class="fs-5">${Math.round(finalIncome)}ä¸‡</span></div><div class="col-4">ã‚¤ãƒ³ãƒ•ãƒ¬<br><span class="fs-5">${finalInflation.toFixed(1)}%</span></div><div class="col-4">æ­ªã¿æŒ‡æ•°<br><span class="fs-5">${finalDistortion.toFixed(2)}</span></div></div>`;
    }
</script>
</body>
</html>