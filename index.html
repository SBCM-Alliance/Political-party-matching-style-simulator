<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<!-- Chart.js & Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    body { background-color: #f0f2f5; font-family: "Helvetica Neue", Arial, sans-serif; }
    .header-area { background: #1a237e; color: white; padding: 20px 0; margin-bottom: 25px; border-bottom: 4px solid #f1c40f; }
    .simulator-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px; transition: transform 0.2s; }
    .result-box { background: #e8f5e9; color: #2e7d32; padding: 20px; border-radius: 8px; margin-top: 15px; border-left: 5px solid #2ecc71; }
    .param-label { font-weight: bold; color: #444; font-size: 0.95rem; }
    
    /* å„å‹¢åŠ›ã®æ¯”è¼ƒã‚«ãƒ¼ãƒ‰ï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰ */
    .policy-guide { display: flex; flex-direction: column; gap: 12px; margin-top: 10px; }
    .policy-card { border: 1px solid #ddd; border-radius: 10px; padding: 12px; background: #fff; }
    .card-header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .party-name { font-weight: bold; font-size: 1rem; }
    .policy-link { font-size: 0.75rem; text-decoration: none; color: #1a237e; border: 1px solid #1a237e; padding: 2px 8px; border-radius: 4px; }
    .pros-cons { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 0.8rem; border-top: 1px solid #eee; pt: 8px; }
    .pros { color: #2e7d32; border-right: 1px solid #eee; padding-right: 5px; }
    .cons { color: #d32f2f; padding-left: 5px; }

    /* æ”¿å…šã‚«ãƒ©ãƒ¼ */
    .bg-jimin { background-color: #d32f2f; }
    .bg-rikken { background-color: #1976d2; }
    .bg-kokumin { background-color: #fbc02d; color: black; }
    .bg-mirai { background-color: #8e44ad; }
    .bg-sanseito { background-color: #ff8c00; }
    .bg-reiwa { background-color: #ff0055; }
    .bg-kyosan { background-color: #cc0000; }
</style>
</head>
<body>

<div class="header-area">
    <div class="container d-flex justify-content-between align-items-center">
        <div>
            <h4 class="m-0 fw-bold">ğŸ—³ï¸ 2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h4>
            <small class="opacity-75">ç‰©ç†æ³•å‰‡ã§æœªæ¥ã‚’äºˆæ¸¬ã™ã‚‹</small>
        </div>
        <button class="btn btn-sm btn-about" style="border: 1px solid white; color: white;" data-bs-toggle="modal" data-bs-target="#aboutModal">
            â“˜ è§£èª¬ãƒ»å„å…šæ”¿ç­–
        </button>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-5 mb-3">
            <div class="simulator-card">
                <h6 class="mb-4 border-bottom pb-2 fw-bold">ğŸ›ï¸ ã‚ãªãŸãŒæœ›ã‚€æ—¥æœ¬ã®è¨­è¨ˆå›³</h6>
                
                <div class="mb-4">
                    <label class="param-label">æ¶ˆè²»ç¨ç‡ï¼ˆç”Ÿæ´»å¿…éœ€å“ã‚’å«ã‚€ï¼‰</label>
                    <input type="range" class="form-range" id="tax_rate" min="0" max="15" value="10" step="1" oninput="updateVal('val_tax', this.value, '%')">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>å»ƒæ­¢ (0%)</span>
                        <span id="val_tax" class="fw-bold text-primary fs-5">10%</span>
                        <span>å¢—ç¨ (15%)</span>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">æŠ•è³‡ã®è¦æ¨¡ã¨è²¡æºæˆ¦ç•¥</label>
                    <input type="range" class="form-range" id="fiscal_spend" min="0" max="3" value="1" step="1" oninput="updateFiscalLabel(this.value)">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>ç·Šç¸®ãƒ»ç¶­æŒ</span>
                        <span id="val_fiscal" class="fw-bold text-primary">ç¾çŠ¶ç¶­æŒ</span>
                        <span>ç©æ¥µãƒ»ç™ºè¡Œ</span>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">ç¤¾ä¼šä¿éšœãƒ»åˆ†é…ã®ä»•çµ„ã¿</label>
                    <select class="form-select form-select-sm" id="social_wall">
                        <option value="keep">ç¾çŠ¶ç¶­æŒ (æ—¢å­˜ã®ç¤¾ä¼šä¿éšœ)</option>
                        <option value="reform_centrist">é£Ÿæ–™å“ç¨ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸› (ä¸­é“æ”¹é©)</option>
                        <option value="reform_high">178ä¸‡å††ã®å£æ’¤å»ƒ (å›½æ°‘æ°‘ä¸»)</option>
                        <option value="reform_sanseito">è‡ªçµ¦è‡ªè¶³ãƒ»å­è‚²ã¦æœˆ10ä¸‡ (å‚æ”¿)</option>
                        <option value="reform_reiwa">æ¶ˆè²»ç¨å»ƒæ­¢ãƒ»å†å…¬å–¶åŒ– (ã‚Œã„ã‚)</option>
                        <option value="reform_kyosan">å†…éƒ¨ç•™ä¿é‚„æµãƒ»è³ƒä¸Šã’ (å…±ç”£)</option>
                        <option value="system_opt">ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ– (ãƒãƒ¼ãƒ ã¿ã‚‰ã„)</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label class="param-label">é˜²è¡›ãƒ»å¤–äº¤ã‚¹ã‚¿ãƒ³ã‚¹</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="defense" id="def_peace" value="peace">
                        <label class="btn btn-outline-secondary btn-sm" for="def_peace">å¯¾è©±ãƒ»è»ç¸®</label>
                        <input type="radio" class="btn-check" name="defense" id="def_status" value="status" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="def_status">å°‚å®ˆé˜²è¡›</label>
                        <input type="radio" class="btn-check" name="defense" id="def_strong" value="strong">
                        <label class="btn btn-outline-secondary btn-sm" for="def_strong">ç‹¬ç«‹ãƒ»å¼·åŒ–</label>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="param-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¿ç­–</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="energy" id="ene_renew" value="renew">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_renew">å†ã‚¨ãƒé‡è¦–</label>
                        <input type="radio" class="btn-check" name="energy" id="ene_mix" value="mix" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="ene_mix">åŸç™ºãƒ»å®‰å®š</label>
                        <input type="radio" class="btn-check" name="energy" id="ene_tech" value="tech">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_tech">æ¬¡ä¸–ä»£æŠ•è³‡</label>
                    </div>
                </div>

                <button onclick="runSimulation()" class="btn btn-primary w-100 fw-bold shadow-sm py-2">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ ğŸš€</button>
            </div>
        </div>

        <div class="col-lg-7">
            <div class="simulator-card">
                <h6 class="mb-3 border-bottom pb-2 fw-bold">ğŸ“Š 5å¹´å¾Œã®æ—¥æœ¬çµŒæ¸ˆäºˆæ¸¬ (SBCMåˆ†æ)</h6>
                <div id="chart-container" style="position: relative; height:300px;">
                    <canvas id="resultChart"></canvas>
                </div>
                <div id="result-text" class="result-box">â˜ï¸ æ”¿ç­–ã‚’é¸æŠã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</div>
                <div class="mt-3 text-end">
                     <a id="twitter-share" href="#" target="_blank" class="btn btn-sm btn-dark disabled">Twitterã§ã‚·ã‚§ã‚¢</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- About Modal -->
<div class="modal fade" id="aboutModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">å„å…šã®æ”¿ç­–ã¨ç‰©ç†ãƒ¢ãƒ‡ãƒ«è§£èª¬</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body small bg-light">
                <p>æ”¿ç­–ã‚’ã€Œæ€æƒ³ã€ã§ã¯ãªãç¤¾ä¼šOSã‚’å‹•ã‹ã™ãŸã‚ã®ã€Œç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã¨ã—ã¦æ¼”ç®—ã—ã¾ã™ã€‚</p>
                
                <div class="policy-guide">
                    <div class="policy-card" style="border-left: 6px solid #d32f2f;">
                        <div class="card-header-top"><span class="party-name">ğŸ”´ ä¸å…š (è‡ªæ°‘ãƒ»ç¶­æ–°)</span><a href="https://www.jimin.jp/news/policy/212294.html" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>é˜²è¡›ã‚„å…ˆç«¯æŠ€è¡“ã¸æŠ•è³‡ã—ã€å›½ã¨ã—ã¦ã®å¼·ã•ã‚’ç¶­æŒã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>ä¸­æŠœãã‚„éƒ½å¿ƒé›†ä¸­ãŒç¶šãã€åœ°æ–¹ã«ãŠé‡‘ãŒå›ã‚Šã«ãã„ã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #1976d2;">
                        <div class="card-header-top"><span class="party-name">ğŸ”µ ä¸­é“æ”¹é©é€£åˆ</span><a href="https://craj.jp/party/policies/" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>é£Ÿå“ç¨ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸›ã€‚æŠ•è³‡ã®å„²ã‘ã‚’å®¶è¨ˆã«é‚„å…ƒã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>é‹ç”¨ã®å¤±æ•—ã§å°†æ¥ã®äºˆç®—ãŒä¸è¶³ã™ã‚‹å¯èƒ½æ€§ã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #fbc02d;">
                        <div class="card-header-top"><span class="party-name">ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š</span><a href="https://new-kokumin.jp/policies" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>178ä¸‡å††ã®å£ã‚’å£Šã—ã€åƒãäººã®ç¾é‡‘ã‚’ä¸€æ°—ã«å¢—ã‚„ã™ã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>å¤§è¦æ¨¡æ¸›ç¨ã«å¯¾ã—ã€å…·ä½“çš„ãªç©´åŸ‹ã‚ãŒå›°é›£ã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #8e44ad;">
                        <div class="card-header-top"><span class="party-name">ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„</span><a href="https://team-mir.ai/election/shugiin-2026" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>ãƒ‡ã‚¸ã‚¿ãƒ«ã§ä¸­æŠœãã‚’æ’é™¤ã€‚åŠ¹ç‡ã ã‘ã§è±Šã‹ã«ã™ã‚‹ã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>ãƒãƒ©ãƒã‚­ãŒãªã„ãŸã‚ã€å®Ÿæ„ŸãŒé…ã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‹ã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #ff8c00;">
                        <div class="card-header-top"><span class="party-name">ğŸŸ  å‚æ”¿å…š</span><a href="https://sanseito.jp/political_measures_2025/specific_policies/" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>æœˆ10ä¸‡ã®å­è‚²ã¦çµ¦ä»˜ã¨é£Ÿã®å®‰å…¨ã€‚ç†æƒ³çš„ãªè‡ªç«‹ã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>è«å¤§ãªãŠé‡‘ã‚’é…ã‚‹ãŸã‚ã€çŒ›çƒˆãªç‰©ä¾¡é«˜ã‚’æ‹›ãã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #ff0055;">
                        <div class="card-header-top"><span class="party-name">ğŸŒ¸ ã‚Œã„ã‚æ–°é¸çµ„</span><a href="https://reiwa-shinsengumi.com/policy/" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>æ¶ˆè²»ç¨å»ƒæ­¢ã¨ã‚¤ãƒ³ãƒ•ãƒ©å›½å–¶åŒ–ã€‚å…¬å…±ã®åŠ›ã§åº•ä¸Šã’ã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>é€šè²¨ç™ºè¡Œéå¤šã§çµŒæ¸ˆãŒãƒ‘ãƒ³ã‚¯ã€‚æ¿€ã—ã„ã‚¤ãƒ³ãƒ•ãƒ¬ã€‚</div>
                        </div>
                    </div>
                    <div class="policy-card" style="border-left: 6px solid #cc0000;">
                        <div class="card-header-top"><span class="party-name">ğŸš© æ—¥æœ¬å…±ç”£å…š</span><a href="https://www.jcp.or.jp/web_policy/16323.html#top" target="_blank" class="policy-link">åŸºæœ¬æ”¿ç­– â†—</a></div>
                        <div class="pros-cons">
                            <div class="pros"><strong>ï¼‹ è‰¯ã„ç‚¹</strong><br>å¤§ä¼æ¥­ã®åˆ©ç›Šã‚’å›åã—ã€è³ƒä¸Šã’ã‚„ç¦ç¥‰ã€è»ç¸®ã¸ã€‚</div>
                            <div class="cons"><strong>ï¼ ãƒªã‚¹ã‚¯</strong><br>è¦åˆ¶å¼·åŒ–ã«ã‚ˆã‚Šä¼æ¥­ã®å…ƒæ°—ãŒãªããªã‚ŠçµŒæ¸ˆåœæ»ã€‚</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let myChart = null;

    function updateVal(id, val, suffix) { document.getElementById(id).innerText = val + suffix; }

    function updateFiscalLabel(val) {
        const labels = ["ç·Šç¸®ãƒ»ç¶­æŒ", "ãƒãƒ©ãƒ³ã‚¹æŠ•è³‡", "ç©æ¥µæŠ•è³‡", "è¶…ç©æ¥µãƒ»ç™ºè¡Œ"];
        document.getElementById("val_fiscal").innerText = labels[val];
    }

    function runSimulation() {
        const taxRate = parseFloat(document.getElementById("tax_rate").value);
        const fiscalLvl = parseInt(document.getElementById("fiscal_spend").value);
        const socialWall = document.getElementById("social_wall").value;
        const defense = document.querySelector('input[name="defense"]:checked').value;
        const energy = document.querySelector('input[name="energy"]:checked').value;

        const baseIncome = 460; const baseInflation = 1.5; 
        let incomeScore = 0; let inflationScore = 0; let distortionScore = 1.0; let futureBurden = 0; 

        // ãƒ­ã‚¸ãƒƒã‚¯æ¼”ç®— (SBCMç‰©ç†ã‚¨ãƒ³ã‚¸ãƒ³)
        incomeScore += (10 - taxRate) * 2.0;
        if (taxRate < 5) { futureBurden += (5 - taxRate) * 15; inflationScore += (5 - taxRate) * 0.4; }
        if (fiscalLvl === 3) { incomeScore += 35; inflationScore += 3.0; distortionScore += 0.45; futureBurden += 50; }
        else if (fiscalLvl === 2) { incomeScore += 15; futureBurden += 10; }

        if (socialWall === 'reform_reiwa') { incomeScore += 42; distortionScore -= 0.05; futureBurden += 45; inflationScore += 0.9; }
        else if (socialWall === 'reform_kyosan') { incomeScore += 30; distortionScore -= 0.15; futureBurden += 15; }
        else if (socialWall === 'reform_centrist') { incomeScore += 18; distortionScore -= 0.12; }
        else if (socialWall === 'reform_high') { incomeScore += 25; futureBurden += 22; }
        else if (socialWall === 'reform_sanseito') { incomeScore += 45; distortionScore += 0.2; futureBurden += 55; inflationScore += 1.2; }
        else if (socialWall === 'system_opt') { incomeScore += 15; distortionScore -= 0.35; }

        if (defense === 'strong') futureBurden += 15;
        if (defense === 'peace') distortionScore -= 0.1;

        const finalIncome = baseIncome + (incomeScore / distortionScore) - (inflationScore * 8);
        const finalInflation = baseInflation + inflationScore;
        const finalDistortion = distortionScore;

        // ãƒãƒƒãƒãƒ³ã‚°
        let match = { name: "ç‹¬è‡ªã®ãƒŸãƒƒã‚¯ã‚¹", color: "#7f8c8d", desc: "æ€æƒ³ã«æ‰ã‚ã‚Œãªã„ç‹¬è‡ªã®å›è·¯è¨­è¨ˆã§ã™ã€‚" };
        if (socialWall === 'reform_sanseito') { match = { name: "ğŸŸ  å‚æ”¿å…š", color: "#ff8c00", desc: "å·¨å¤§çµ¦ä»˜ã®ç‹¬ç«‹è‡ªå°Šãƒ¢ãƒ‡ãƒ«ã€‚æ‰‹å–ã‚Šã¯å¢—ãˆã¾ã™ãŒç‰©ä¾¡é«˜ãƒªã‚¹ã‚¯æœ€å¤§ã€‚"}; }
        else if (socialWall === 'reform_reiwa') { match = { name: "ğŸŒ¸ ã‚Œã„ã‚æ–°é¸çµ„", color: "#ff0055", desc: "é€šè²¨ç™ºè¡Œã«ã‚ˆã‚‹å…¬å…±å†ç”Ÿãƒ¢ãƒ‡ãƒ«ã€‚ã‚¤ãƒ³ãƒ•ãƒ¬æŠ‘åˆ¶ãŒæˆåŠŸã®éµã€‚" }; }
        else if (socialWall === 'reform_kyosan') { match = { name: "ğŸš© æ—¥æœ¬å…±ç”£å…š", color: "#cc0000", desc: "å†…éƒ¨ç•™ä¿ã®é‚„æµã¨è»ç¸®ã€‚æ­ªã¿ã‚’æ­£ã—ã¦ç”Ÿæ´»è€…ã«é‚„å…ƒã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã€‚" }; }
        else if (socialWall === 'reform_centrist') { match = { name: "ğŸ”µ ä¸­é“æ”¹é©é€£åˆ", color: "#1976d2", desc: "é£Ÿæ–™å“ç¨ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸›ã€‚å®¶è¨ˆã®æ‘©æ“¦ã‚’æ¸›ã‚‰ã™åºƒåŸŸå¾ªç’°å‹ã€‚" }; }
        else if (socialWall === 'reform_high') { match = { name: "ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š", color: "#fbc02d", desc: "æ‰€å¾—ç¨æ¸›ç¨ã«ã‚ˆã‚‹æ‰‹å–ã‚Šæœ€å¤§åŒ–ã€‚ç¾å½¹ä¸–ä»£ã®é›»åœ§ã‚’ä¸€æ°—ã«ä¸Šã’ã¾ã™ã€‚" }; }
        else if (socialWall === 'system_opt') { match = { name: "ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„", color: "#8e44ad", desc: "ä¸­æŠœãã‚’æ’é™¤ã™ã‚‹è¶…ä¼å°çµ±æ²»ã€‚åŠ¹ç‡åŒ–ã®ã¿ã§å‡ºåŠ›ã‚’ä¸Šã’ã‚‹ç‰¹åŒ–å‹ã€‚" }; }
        else if (defense === 'strong' && fiscalLvl >= 1) { match = { name: "ğŸ”´ ä¸å…š (è‡ªæ°‘ãƒ»ç¶­æ–°)", color: "#d32f2f", desc: "å®‰å®šãƒ»é˜²è¡›é‡è¦–è·¯ç·šã€‚æ—¢å­˜ã‚¤ãƒ³ãƒ•ãƒ©å¼·åŒ–ã¨æˆé•·æŠ•è³‡ã‚’å„ªå…ˆã€‚" }; }

        // æç”»
        const ctx = document.getElementById('resultChart').getContext('2d');
        if (myChart) myChart.destroy();
        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['å®Ÿè³ªæ‰‹å–ã‚Š', 'ã‚¤ãƒ³ãƒ•ãƒ¬ç‡', 'è¡Œæ”¿ã®æ­ªã¿'],
                datasets: [{
                    data: [Math.round(finalIncome)/baseIncome*100, (finalInflation/baseInflation)*100, finalDistortion*100],
                    backgroundColor: [finalIncome >= baseIncome ? '#2ecc71' : '#e74c3c', finalInflation > 4.5 ? '#e74c3c' : '#3498db', finalDistortion > 1.25 ? '#e74c3c' : '#3498db']
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: -100, max: 200, ticks: { display: false } } }, plugins: { legend: { display: false } } }
        });

        document.getElementById("result-text").innerHTML = `<h5 style="color:${match.color}">${match.name}</h5><p class="small">${match.desc}</p><hr><div class="row text-center"><div class="col-4">æ‰‹å–ã‚Š<br><span class="fs-5">${Math.round(finalIncome)}ä¸‡</span></div><div class="col-4">ã‚¤ãƒ³ãƒ•ãƒ¬<br><span class="fs-5">${finalInflation.toFixed(1)}%</span></div><div class="col-4">æ­ªã¿æŒ‡æ•°<br><span class="fs-5">${finalDistortion.toFixed(2)}</span></div></div>`;
        const tweetText = `ç§ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœï¼šã€${match.name}ã€‘ğŸ’°æ‰‹å–ã‚Šï¼š${Math.round(finalIncome)}ä¸‡å†† ğŸ“ˆã‚¤ãƒ³ãƒ•ãƒ¬ï¼š${finalInflation.toFixed(1)}% #2026è¡†é™¢é¸ #SBCMã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼`;
        document.getElementById("twitter-share").href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
        document.getElementById("twitter-share").classList.remove("disabled");
    }
</script>
</body>
</html>