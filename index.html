<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<!-- Chart.js & Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    body { background-color: #f0f2f5; font-family: "Helvetica Neue", Arial, sans-serif; }
    .header-area { background: #1a237e; color: white; padding: 20px 0; margin-bottom: 25px; border-bottom: 4px solid #f1c40f; }
    .simulator-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px; transition: transform 0.2s; }
    .result-box { background: #e8f5e9; color: #2e7d32; padding: 20px; border-radius: 8px; margin-top: 15px; border-left: 5px solid #2ecc71; }
    .param-label { font-weight: bold; color: #444; font-size: 0.95rem; }
    #plot-area { width: 100%; min-height: 350px; }
    .btn-about { border: 1px solid white; color: white; font-size: 0.85rem; }
    .party-tag { font-size: 0.8em; padding: 3px 8px; border-radius: 4px; color: white; margin-right: 5px; display: inline-block; }
    
    /* æ”¿å…šã‚«ãƒ©ãƒ¼ */
    .bg-jimin { background-color: #d32f2f; } /* è‡ªæ°‘ãƒ»ç¶­æ–° */
    .bg-rikken { background-color: #1976d2; } /* ä¸­é“æ”¹é© */
    .bg-kokumin { background-color: #fbc02d; color: black; } /* å›½æ°‘æ°‘ä¸» */
    .bg-mirai { background-color: #8e44ad; } /* ãƒãƒ¼ãƒ ã¿ã‚‰ã„ */
    .bg-kyosan { background-color: #880e4f; } /* å…±ç”£ãƒ»ã‚Œã„ã‚ */
</style>
</head>
<body>

<!-- Header -->
<div class="header-area">
    <div class="container d-flex justify-content-between align-items-center">
        <div>
            <h4 class="m-0 fw-bold">ğŸ—³ï¸ 2026è¡†é™¢é¸ æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h4>
            <small class="opacity-75">ç‰©ç†æ³•å‰‡ã§æœªæ¥ã‚’äºˆæ¸¬ã™ã‚‹</small>
        </div>
        <button class="btn btn-sm btn-about" data-bs-toggle="modal" data-bs-target="#aboutModal">
            â“˜ è§£èª¬
        </button>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- Input Panel -->
        <div class="col-lg-5 mb-3">
            <div class="simulator-card">
                <h6 class="mb-4 border-bottom pb-2 fw-bold">ğŸ›ï¸ ã‚ãªãŸãŒæœ›ã‚€æ—¥æœ¬ã®è¨­è¨ˆå›³</h6>
                
                <!-- æ¶ˆè²»ç¨ -->
                <div class="mb-4">
                    <label class="param-label">æ¶ˆè²»ç¨ç‡ï¼ˆç”Ÿæ´»å¿…éœ€å“ã‚’å«ã‚€ï¼‰</label>
                    <input type="range" class="form-range" id="tax_rate" min="0" max="15" value="10" step="1" oninput="updateVal('val_tax', this.value, '%')">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>å»ƒæ­¢ (0%)</span>
                        <span id="val_tax" class="fw-bold text-primary fs-5">10%</span>
                        <span>å¢—ç¨ (15%)</span>
                    </div>
                </div>

                <!-- è²¡æ”¿å‡ºå‹• -->
                <div class="mb-4">
                    <label class="param-label">æŠ•è³‡ã®è¦æ¨¡ã¨è²¡æºæˆ¦ç•¥</label>
                    <input type="range" class="form-range" id="fiscal_spend" min="0" max="3" value="1" step="1" oninput="updateFiscalLabel(this.value)">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>ç·Šç¸®ãƒ»ç¶­æŒ</span>
                        <span id="val_fiscal" class="fw-bold text-primary">ç¾çŠ¶ç¶­æŒ</span>
                        <span>ç©æ¥µæŠ•è³‡</span>
                    </div>
                    <small id="fiscal_desc" class="d-block mt-1 text-secondary" style="font-size:0.8em">ãƒãƒ©ãƒ³ã‚¹é‡è¦–ã®äºˆç®—é…åˆ†</small>
                </div>

                <!-- ç¤¾ä¼šä¿éšœãƒ»åˆ†é… -->
                <div class="mb-4">
                    <label class="param-label">ç¤¾ä¼šä¿éšœãƒ»åˆ†é…ã®ä»•çµ„ã¿</label>
                    <select class="form-select form-select-sm" id="social_wall">
                        <option value="keep">ç¾çŠ¶ç¶­æŒ (æ—¢å­˜ã®ç¤¾ä¼šä¿éšœ)</option>
                        <option value="reform_centrist">é£Ÿæ–™å“ç¨ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸› (ä¸­é“æ”¹é©)</option>
                        <option value="reform_high">178ä¸‡å††ã®å£æ’¤å»ƒ (å›½æ°‘æ°‘ä¸»)</option>
                        <option value="system_opt">ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ– (ãƒãƒ¼ãƒ ã¿ã‚‰ã„)</option>
                    </select>
                </div>

                <!-- é˜²è¡›ãƒ»å¤–äº¤ -->
                <div class="mb-4">
                    <label class="param-label">é˜²è¡›ãƒ»å¤–äº¤ã‚¹ã‚¿ãƒ³ã‚¹</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="defense" id="def_peace" value="peace">
                        <label class="btn btn-outline-secondary btn-sm" for="def_peace">å¯¾è©±ãƒ»ç¾å®Ÿå¤–äº¤</label>

                        <input type="radio" class="btn-check" name="defense" id="def_status" value="status" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="def_status">å°‚å®ˆé˜²è¡›</label>

                        <input type="radio" class="btn-check" name="defense" id="def_strong" value="strong">
                        <label class="btn btn-outline-secondary btn-sm" for="def_strong">é˜²è¡›åŠ›å¼·åŒ–</label>
                    </div>
                </div>

                <!-- ã‚¨ãƒãƒ«ã‚®ãƒ¼ -->
                <div class="mb-4">
                    <label class="param-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¿ç­–</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="energy" id="ene_renew" value="renew">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_renew">å†ã‚¨ãƒãƒ»è„±åŸç™º</label>

                        <input type="radio" class="btn-check" name="energy" id="ene_mix" value="mix" checked>
                        <label class="btn btn-outline-secondary btn-sm" for="ene_mix">åŸç™ºå†ç¨¼åƒãƒ»å®‰å®š</label>
                        
                        <input type="radio" class="btn-check" name="energy" id="ene_tech" value="tech">
                        <label class="btn btn-outline-secondary btn-sm" for="ene_tech">æ¬¡ä¸–ä»£æŠ€è¡“æŠ•è³‡</label>
                    </div>
                </div>

                <button onclick="runSimulation()" class="btn btn-primary w-100 fw-bold shadow-sm py-2">
                    ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ ğŸš€
                </button>
            </div>
        </div>

        <!-- Result Panel -->
        <div class="col-lg-7">
            <div class="simulator-card">
                <h6 class="mb-3 border-bottom pb-2 fw-bold">ğŸ“Š 5å¹´å¾Œã®æ—¥æœ¬çµŒæ¸ˆäºˆæ¸¬ (SBCMåˆ†æ)</h6>
                <div id="chart-container" style="position: relative; height:300px;">
                    <canvas id="resultChart"></canvas>
                </div>
                
                <div id="result-text" class="result-box">
                    <strong>â˜ï¸ æ”¿ç­–ã‚’é¸æŠã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</strong><br>
                    ã€Œã‚¸ãƒ£ãƒ‘ãƒ³ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰ã€ã‚„ã€Œé£Ÿæ–™å“ç¨ã‚¼ãƒ­ã€ãªã©ã®æœ€æ–°æ”¿ç­–ãŒã€å®¶è¨ˆã®ã€Œä¿æŒç‡ã€ã«ã©ã†å½±éŸ¿ã™ã‚‹ã‹è¨ˆç®—ã—ã¾ã™ã€‚
                </div>
                
                <div class="mt-3 text-end">
                     <a id="twitter-share" href="#" target="_blank" class="btn btn-sm btn-dark disabled">
                        Twitterã§çµæœã‚’ã‚·ã‚§ã‚¢
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- About Modal -->
<div class="modal fade" id="aboutModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">SBCMç†è«–ï¼šæ”¹å®šãƒãƒ¼ãƒˆ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body small">
                <p><strong>æœ€æ–°ã®æ”¹å®šï¼š</strong>ä¸­é“æ”¹é©é€£åˆã®ã€Œé£Ÿæ–™å“æ¶ˆè²»ç¨ã‚¼ãƒ­ã€ã¨ã€Œç¤¾ä¼šä¿é™ºæ–™ä½æ¸›ã€ã‚’ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«çµ„ã¿è¾¼ã¿ã¾ã—ãŸã€‚</p>
                <ul>
                    <li><strong>é£Ÿæ–™å“ç¨ã‚¼ãƒ­:</strong> åŸºç¤çš„æ¶ˆè²»ã«ãŠã‘ã‚‹æŠµæŠ—ï¼ˆæ‘©æ“¦ï¼‰ã‚’ç›´æ¥é™¤å»ã™ã‚‹ãŸã‚ã€ä½æ‰€å¾—å±¤ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿æŒç‡ã‚’åŠ‡çš„ã«æ”¹å–„ã—ã¾ã™ã€‚</li>
                    <li><strong>ã‚¸ãƒ£ãƒ‘ãƒ³ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰:</strong> å¤–éƒ¨ã‹ã‚‰ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆé‹ç”¨ç›Šï¼‰ã‚’å–ã‚Šè¾¼ã‚€ã“ã¨ã§ã€å¢—ç¨ã¨ã„ã†ã€Œç—›ã¿ã€ãªã—ã«å…¥åŠ›ã‚’å¢—ã‚„ã™å›è·¯ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚</li>
                </ul>
                <p>SBCMï¼ˆæ¨™æº–ãƒ–ãƒ­ãƒƒã‚¯æ¯”è¼ƒæ³•ï¼‰ã¯ã€ç‰¹å®šã®æ€æƒ³ã§ã¯ãªãã€Œç†±åŠ›å­¦çš„ãªæŒç¶šå¯èƒ½æ€§ã€ã§æ”¿ç­–ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
            </div>
        </div>
    </div>
</div>

<script>
    let myChart = null;

    function updateVal(id, val, suffix) {
        document.getElementById(id).innerText = val + suffix;
    }

    function updateFiscalLabel(val) {
        const labels = ["ç·Šç¸®ãƒ»ç¶­æŒ", "ãƒãƒ©ãƒ³ã‚¹æŠ•è³‡", "æ”¿åºœç³»ãƒ•ã‚¡ãƒ³ãƒ‰æ´»ç”¨", "ç©æ¥µè²¡æ”¿"];
        const descs = [
            "ç¾çŠ¶ç¶­æŒã€‚è²¡æ”¿è¦å¾‹ã‚’é‡è¦–ã€‚",
            "ã‚¤ãƒ³ãƒ•ãƒ©æ›´æ–°ãƒ»é˜²ç½ã¸é‡ç‚¹æŠ•è³‡ã€‚",
            "ã‚¸ãƒ£ãƒ‘ãƒ³ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰ç­‰ã®é‹ç”¨ç›Šã‚’åŸè³‡ã«æŠ•è³‡ã€‚",
            "å›½å‚µç™ºè¡Œã«ã‚ˆã‚‹å¤§è¦æ¨¡ãªç”£æ¥­æ”¯æ´ã€‚"
        ];
        document.getElementById("val_fiscal").innerText = labels[val];
        document.getElementById("fiscal_desc").innerText = descs[val];
    }

    function runSimulation() {
        const taxRate = parseFloat(document.getElementById("tax_rate").value);
        const fiscalLvl = parseInt(document.getElementById("fiscal_spend").value);
        const socialWall = document.getElementById("social_wall").value;
        const defense = document.querySelector('input[name="defense"]:checked').value;
        const energy = document.querySelector('input[name="energy"]:checked').value;

        const baseIncome = 460; 
        const baseInflation = 1.5; 
        
        let incomeScore = 0; 
        let inflationScore = 0; 
        let distortionScore = 1.0; 
        let futureBurden = 0; 

        // A. ç¨åˆ¶ã®å½±éŸ¿ (ç—›ã¿ã®ä¿å­˜å‰‡)
        incomeScore += (10 - taxRate) * 1.5;
        if (taxRate < 5) {
            futureBurden += (5 - taxRate) * 12; 
            inflationScore += (5 - taxRate) * 0.25; 
        }

        // B. è²¡æ”¿å‡ºå‹•ã®å½±éŸ¿ (æ¼å‡ºã®å®šç†)
        if (fiscalLvl === 0) { 
            incomeScore -= 5;
            inflationScore -= 0.5;
        } else if (fiscalLvl === 1) { 
            incomeScore += 5;
            futureBurden += 5;
        } else if (fiscalLvl === 2) { // ã‚¸ãƒ£ãƒ‘ãƒ³ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰æ´»ç”¨
            incomeScore += 12;
            futureBurden += 2; // é‹ç”¨ç›Šæ´»ç”¨ã®ãŸã‚å›½å‚µä¾å­˜ãŒä½ã„
            distortionScore += 0.05; 
        } else if (fiscalLvl === 3) { 
            incomeScore += 18;
            inflationScore += 2.5;
            distortionScore += 0.4;
            futureBurden += 40;
        }

        // C. ç¤¾ä¼šä¿éšœãƒ»ä¸­é“æ”¹é©ã®æ–°ãƒ­ã‚¸ãƒƒã‚¯åæ˜ 
        if (socialWall === 'reform_high') { 
            incomeScore += 25; 
            futureBurden += 20; 
        } else if (socialWall === 'reform_centrist') { // ä¸­é“æ”¹é©: é£Ÿæ–™å“ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸›
            incomeScore += 18; // å®Ÿè³ªæ‰‹å–ã‚Šã®ç›´æ¥çš„å‘ä¸Š
            distortionScore -= 0.1; // è¤‡é›‘ãªçµ¦ä»˜äº‹å‹™ã‚ˆã‚Šç¨ç‡ã‚¼ãƒ­ã®æ–¹ãŒæ‘©æ“¦ãŒå°‘ãªã„
            futureBurden += 8; // ç¤¾ä¿æ¸›ååˆ†ã€‚ãƒ•ã‚¡ãƒ³ãƒ‰ã§è£œå¡«ã™ã‚‹æƒ³å®š
        } else if (socialWall === 'system_opt') { 
            incomeScore += 15; 
            distortionScore -= 0.3; 
        }

        // D. å¤–äº¤ãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼
        if (defense === 'strong') futureBurden += 10;
        if (energy === 'tech') futureBurden += 5;

        // æœ€çµ‚è¨ˆç®—
        const finalIncome = baseIncome + (incomeScore / distortionScore) - (inflationScore * 6);
        const finalInflation = baseInflation + inflationScore;
        const finalDistortion = distortionScore;

        // 3. æ”¿å…šãƒãƒƒãƒãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
        let bestMatch = "è©²å½“ãªã—";
        let partyColor = "#7f8c8d";
        let partyDesc = "ç‹¬è‡ªã®æ”¿ç­–ãƒŸãƒƒã‚¯ã‚¹ã§ã™ã€‚";

        // ğŸ”µ ä¸­é“æ”¹é©é€£åˆ (é£Ÿæ–™å“ã‚¼ãƒ­ãƒ»ç¤¾ä¿æ¸›ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰)
        if (socialWall === 'reform_centrist' || (taxRate <= 10 && fiscalLvl === 2)) {
            bestMatch = "ğŸ”µ ä¸­é“æ”¹é©é€£åˆ (ç«‹æ†²ãƒ»å…¬æ˜ç­‰)";
            partyColor = "#1976d2";
            partyDesc = "ã€Œé£Ÿæ–™å“ç¨ã‚¼ãƒ­ã€ã¨ã€Œç¤¾ä¿æ¸›ã€ã§ç¾å½¹ãƒ»ç”Ÿæ´»è€…ã‚’ç›´æ¥æ”¯æ´ã€‚ã‚¸ãƒ£ãƒ‘ãƒ³ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰ã§å°†æ¥è² æ‹…ã‚’æŠ‘ãˆã¤ã¤ã€åºƒåŸŸã§ã®çµŒæ¸ˆå¾ªç’°ã‚’ç›®æŒ‡ã™ä½æ‘©æ“¦ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚";
        }
        // ğŸ”´ ä¸å…š (è‡ªæ°‘ãƒ»ç¶­æ–°)
        else if (defense === 'strong' && energy === 'mix' && fiscalLvl >= 1) {
            bestMatch = "ğŸ”´ è‡ªæ°‘ãƒ»ç¶­æ–° é€£ç«‹æ”¿æ¨©";
            partyColor = "#d32f2f";
            partyDesc = "ã€Œå¼·ã„æ—¥æœ¬ã€ã‚’æ²ã’ã‚‹å®‰å®šãƒ»é˜²è¡›é‡è¦–è·¯ç·šã€‚æ—¢å­˜ã‚¤ãƒ³ãƒ•ãƒ©ã®å¼·åŒ–ã¨æˆé•·æŠ•è³‡ã‚’å„ªå…ˆã—ã¾ã™ãŒã€ä¸­å¤®é›†æ¨©çš„ãªæ¼å‡ºãƒªã‚¹ã‚¯ã¯æ®‹ã‚Šã¾ã™ã€‚";
        }
        // ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š
        else if (socialWall === 'reform_high') {
            bestMatch = "ğŸŸ¡ å›½æ°‘æ°‘ä¸»å…š";
            partyColor = "#fbc02d";
            partyDesc = "ã€Œæ‰‹å–ã‚Šæœ€å¤§åŒ–ã€ã‚’æœ€å„ªå…ˆã€‚åŸºç¤æ§é™¤å¼•ãä¸Šã’ã§ç¾å½¹ä¸–ä»£ã®é›»åœ§ã‚’ä¸€æ°—ã«ä¸Šã’ã¾ã™ãŒã€è²¡æ”¿çš„ãªã‚¤ãƒ³ãƒ”ãƒ¼ãƒ€ãƒ³ã‚¹ï¼ˆæŠµæŠ—ï¼‰ã¸ã®å¯¾ç­–ãŒèª²é¡Œã§ã™ã€‚";
        }
        // ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„
        else if (socialWall === 'system_opt') {
            bestMatch = "ğŸš€ ãƒãƒ¼ãƒ ã¿ã‚‰ã„";
            partyColor = "#8e44ad";
            partyDesc = "ã‚·ã‚¹ãƒ†ãƒ ã®æ ¹æœ¬ä¿®ç†ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«ã«ã‚ˆã‚‹ä¸­æŠœãæ’é™¤ã§ã€è¿½åŠ äºˆç®—ãªã—ã§å®Ÿè³ªå‡ºåŠ›ã‚’æœ€å¤§åŒ–ã™ã‚‹ã€Œè¶…ä¼å°ã€çµ±æ²»ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚";
        }
        // ğŸŸ£ å…±ç”£ãƒ»ã‚Œã„ã‚
        else if (taxRate <= 5 && fiscalLvl === 3) {
            bestMatch = "ğŸŸ£ é‡å…šå…±é—˜ (å…±ç”£ãƒ»ã‚Œã„ã‚)";
            partyColor = "#880e4f";
            partyDesc = "æ¶ˆè²»ç¨ã®å¤§å¹…æ¸›ç¨ã¨å›½å‚µã«ã‚ˆã‚‹å¤§è¦æ¨¡çµ¦ä»˜ã€‚çŸ­æœŸçš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯æœ€å¤§ã§ã™ãŒã€åˆ¶å¾¡ä¸èƒ½ãªã‚¤ãƒ³ãƒ•ãƒ¬ï¼ˆç†±çš„æ­»ï¼‰ã®æ‡¸å¿µãŒç‰©ç†çš„ã«æŒ‡æ‘˜ã•ã‚Œã¾ã™ã€‚";
        }

        // 4. ãƒãƒ£ãƒ¼ãƒˆæç”»
        const ctx = document.getElementById('resultChart').getContext('2d');
        if (myChart) myChart.destroy();

        const dataIncome = Math.round(finalIncome);
        const dataInf = finalInflation.toFixed(1);
        const dataDist = finalDistortion.toFixed(2);

        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['å®Ÿè³ªæ‰‹å–ã‚Š(å¹´å)', 'ã‚¤ãƒ³ãƒ•ãƒ¬ç‡', 'è¡Œæ”¿ã®æ­ªã¿(ç†±æå¤±)'],
                datasets: [{
                    label: 'äºˆæ¸¬å€¤',
                    data: [dataIncome/baseIncome*100, (dataInf/baseInflation)*100, dataDist*100],
                    backgroundColor: [
                        dataIncome >= baseIncome ? '#2ecc71' : '#e74c3c',
                        dataInf > 3.0 ? '#e74c3c' : '#3498db',
                        dataDist > 1.15 ? '#e74c3c' : '#3498db'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { beginAtZero: false, min: 30, max: 180, ticks: { display: false } } },
                plugins: { legend: { display: false } }
            }
        });

        // 5. çµæœè¡¨ç¤º
        const diff = Math.round(finalIncome - baseIncome);
        const sign = diff > 0 ? "+" : "";
        
        let html = `<h5 style="color:${partyColor}">${bestMatch}</h5>`;
        html += `<p class="small">${partyDesc}</p>`;
        html += `<hr>`;
        html += `<div class="row text-center">`;
        html += `<div class="col-4"><strong>æ‰‹å–ã‚Š</strong><br><span class="fs-5">${dataIncome}ä¸‡</span><br><small class="${diff>0?'text-success':'text-danger'}">(${sign}${diff})</small></div>`;
        html += `<div class="col-4"><strong>ã‚¤ãƒ³ãƒ•ãƒ¬</strong><br><span class="fs-5">${dataInf}%</span></div>`;
        html += `<div class="col-4"><strong>æ­ªã¿æŒ‡æ•°</strong><br><span class="fs-5">${dataDist}</span></div>`;
        html += `</div>`;

        if(finalDistortion < 0.95) {
            html += `<div class="mt-3 p-2 bg-success bg-opacity-25 rounded small text-dark">âœ… <strong>SBCMè©•ä¾¡:</strong> åŠ¹ç‡çš„ãªã€ŒæŠµæŠ—é™¤å»ã€ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿè³ªçš„ãªè³¼è²·åŠ›ãŒç¶­æŒã•ã‚Œã‚„ã™ã„æ§‹é€ ã§ã™ã€‚</div>`;
        } else if(futureBurden > 30) {
            html += `<div class="mt-3 p-2 bg-danger bg-opacity-25 rounded small text-dark">âš ï¸ <strong>SBCMè­¦å‘Š:</strong> å°†æ¥ä¸–ä»£ã¸ã®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼è“„ç©ãŒæ·±åˆ»ã§ã™ã€‚æŒç¶šå¯èƒ½æ€§ã«ãƒã‚°ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚</div>`;
        }

        document.getElementById("result-text").innerHTML = html;

        const tweetText = `ç§ã®æ”¿ç­–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœï¼š\nã€${bestMatch}ã€‘\nğŸ’°æ‰‹å–ã‚Šï¼š${dataIncome}ä¸‡å†† (${sign}${diff})\nğŸ“ˆã‚¤ãƒ³ãƒ•ãƒ¬ï¼š${dataInf}%\nğŸ¤–æ­ªã¿æŒ‡æ•°ï¼š${dataDist}\n\n#2026è¡†é™¢é¸ #SBCMã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼`;
        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
        const btn = document.getElementById("twitter-share");
        btn.href = url;
        btn.classList.remove("disabled", "btn-dark");
        btn.classList.add("btn-primary");
    }
</script>

</body>
</html>